!function(){function e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==c.return||c.return()}finally{if(i)throw o}}return r}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}function r(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[14,18,19],{"+cje":function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r("HDdC"),o=r("XEKg"),c=r("5Jak"),s=r("/GcI"),u=r("cxbk"),d=r("fXoL"),l=r("tk/3"),f=function(){var e=function(){function e(t){i(this,e),this.http=t,this.APIURL=u.a.apiURL}return a(e,[{key:"create",value:function(e){return this.http.post(this.APIURL+"/restaurant",e)}},{key:"getAllRestaurant",value:function(){return this.http.get(this.APIURL+"/restaurant")}},{key:"updateRestaurant",value:function(e){return this.http.put(this.APIURL+"/restaurant/",e)}},{key:"removeRestaurant",value:function(e){return this.http.delete(this.APIURL+"/restaurant/"+e).toPromise()}},{key:"handleError",value:function(e){return n.a.throw(400===e.status?new o.a(e.json()):404===e.status?new c.a:new s.a(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.cc(l.a))},e.\u0275prov=d.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"+p+5":function(e,t,r){"use strict";r.r(t),r.d(t,"OrderPageModule",function(){return N});var n=r("ofXK"),o=r("3Pt+"),c=r("TEn/"),s=r("tyNb"),u=r("mrSG"),d=r("YHxn"),l=r("fXoL"),f=r("Dkj+"),h=r("VNSQ"),b=r("6wYF"),m=r("8D9V"),v=r("ldse"),g=r("+cje"),p=r("Wwn5"),O=["pageTop"];function w(e,t){if(1&e){var r=l.Wb();l.Vb(0,"ion-row",17),l.gc("click",function(){l.wc(r);var e=t.$implicit;return l.ic(2).allOrder(e,e.id)}),l.Vb(1,"ion-col",18),l.Vb(2,"ion-label"),l.Ec(3),l.Vb(4,"p"),l.Ec(5),l.jc(6,"date"),l.Ub(),l.Ub(),l.Vb(7,"ion-text",19),l.Vb(8,"b"),l.Ec(9),l.jc(10,"currency"),l.Ub(),l.Ub(),l.Ub(),l.Vb(11,"ion-col",20),l.Vb(12,"ion-label",21),l.Ec(13),l.Ub(),l.Ub(),l.Ub()}if(2&e){var n=t.$implicit;l.Eb(3),l.Gc(" ",n.restaurantName," "),l.Eb(2),l.Fc(l.lc(6,4,n.DateTime,"short")),l.Eb(4),l.Gc("Total : ",l.lc(10,7,n.Total,"ETB"),""),l.Eb(4),l.Fc(n.OrderStatus)}}function y(e,t){if(1&e&&(l.Vb(0,"ion-label",22),l.Ec(1),l.Ub()),2&e){var r=l.ic(2);l.Eb(1),l.Fc(r.messageOrder)}}function k(e,t){if(1&e&&(l.Vb(0,"ion-list"),l.Cc(1,w,14,10,"ion-row",15),l.Cc(2,y,2,1,"ion-label",16),l.Ub()),2&e){var r=l.ic();l.Eb(1),l.oc("ngForOf",r.listOfOrder),l.Eb(1),l.oc("ngIf",0==r.listOfOrder.length)}}function I(e,t){if(1&e){var r=l.Wb();l.Vb(0,"ion-row",24),l.Vb(1,"ion-col",18),l.Vb(2,"ion-label"),l.Ec(3),l.Vb(4,"p"),l.Ec(5),l.jc(6,"date"),l.Ub(),l.Vb(7,"ion-button",25),l.gc("click",function(){l.wc(r);var e=t.$implicit;return l.ic(2).location(e.Location)}),l.Rb(8,"ion-icon",26),l.Ub(),l.Ub(),l.Vb(9,"ion-text",19),l.Vb(10,"b"),l.Ec(11),l.jc(12,"currency"),l.Ub(),l.Ub(),l.Rb(13,"br"),l.Vb(14,"ion-text",27),l.Ec(15),l.Ub(),l.Ub(),l.Vb(16,"ion-col",20),l.Vb(17,"ion-label",21),l.Ec(18),l.Ub(),l.Vb(19,"ion-button",28),l.gc("click",function(){l.wc(r);var e=t.$implicit;return l.ic(2).viewOrder(e.id)}),l.Ec(20," view order "),l.Ub(),l.Vb(21,"button",29),l.gc("click",function(){l.wc(r);var e=t.$implicit;return l.ic(2).sendMessage(e.DriverId,e.CustomerId,e.Driver)}),l.Ec(22," Send message "),l.Ub(),l.Vb(23,"button",30),l.gc("click",function(){l.wc(r);var e=t.$implicit;return l.ic(2).callToDriver(e.driverPhonenumber)}),l.Rb(24,"ion-icon",31),l.Ub(),l.Ub(),l.Ub()}if(2&e){var n=t.$implicit;l.Eb(3),l.Gc(" ",n.restaurantName," "),l.Eb(2),l.Fc(l.lc(6,5,n.DateTime,"short")),l.Eb(6),l.Gc("Total : ",l.lc(12,8,n.Total,"ETB"),""),l.Eb(4),l.Gc("",n.Driver," is picking up your order "),l.Eb(3),l.Fc(n.OrderStatus)}}function R(e,t){if(1&e&&(l.Vb(0,"ion-label",22),l.Ec(1),l.Ub()),2&e){var r=l.ic(2);l.Eb(1),l.Fc(r.messageOrder)}}function x(e,t){if(1&e&&(l.Vb(0,"ion-list"),l.Cc(1,I,25,11,"ion-row",23),l.Cc(2,R,2,1,"ion-label",16),l.Ub()),2&e){var r=l.ic();l.Eb(1),l.oc("ngForOf",r.listOfOrderProcessing),l.Eb(1),l.oc("ngIf",0==r.listOfOrderProcessing.length)}}function C(e,t){if(1&e){var r=l.Wb();l.Vb(0,"ion-row",24),l.Vb(1,"ion-col",18),l.Vb(2,"ion-label"),l.Ec(3),l.Vb(4,"p"),l.Ec(5),l.jc(6,"date"),l.Ub(),l.Vb(7,"ion-button",25),l.gc("click",function(){l.wc(r);var e=t.$implicit;return l.ic(2).location(e.Location)}),l.Rb(8,"ion-icon",26),l.Ub(),l.Ub(),l.Vb(9,"ion-text",19),l.Vb(10,"b"),l.Ec(11),l.jc(12,"currency"),l.Ub(),l.Ub(),l.Ub(),l.Vb(13,"ion-col",20),l.Vb(14,"ion-label",21),l.Ec(15),l.Ub(),l.Vb(16,"ion-button",28),l.gc("click",function(){l.wc(r);var e=t.$implicit;return l.ic(2).viewOrder(e.id)}),l.Ec(17," view order "),l.Ub(),l.Ub(),l.Ub()}if(2&e){var n=t.$implicit;l.Eb(3),l.Gc(" ",n.restaurantName," "),l.Eb(2),l.Fc(l.lc(6,4,n.DateTime,"short")),l.Eb(6),l.Gc("Total : ",l.lc(12,7,n.Total,"ETB"),""),l.Eb(4),l.Fc(n.OrderStatus)}}function U(e,t){if(1&e&&(l.Vb(0,"ion-label",22),l.Ec(1),l.Ub()),2&e){var r=l.ic(2);l.Eb(1),l.Fc(r.messageOrder)}}function E(e,t){if(1&e&&(l.Vb(0,"ion-list"),l.Cc(1,C,18,10,"ion-row",23),l.Cc(2,U,2,1,"ion-label",16),l.Ub()),2&e){var r=l.ic();l.Eb(1),l.oc("ngForOf",r.listOfOrderCompeleted),l.Eb(1),l.oc("ngIf",0==r.listOfOrderCompeleted.length)}}function P(e,t){if(1&e){var r=l.Wb();l.Vb(0,"ion-row",24),l.Vb(1,"ion-col",18),l.Vb(2,"ion-label"),l.Ec(3),l.Vb(4,"p"),l.Ec(5),l.jc(6,"date"),l.Ub(),l.Vb(7,"ion-button",25),l.gc("click",function(){l.wc(r);var e=t.$implicit;return l.ic(2).location(e.Location)}),l.Rb(8,"ion-icon",26),l.Ub(),l.Ub(),l.Vb(9,"ion-text",19),l.Vb(10,"b"),l.Ec(11),l.jc(12,"currency"),l.Ub(),l.Ub(),l.Ub(),l.Vb(13,"ion-col",20),l.Vb(14,"ion-label",21),l.Ec(15),l.Ub(),l.Vb(16,"ion-button",28),l.gc("click",function(){l.wc(r);var e=t.$implicit;return l.ic(2).viewOrder(e.id)}),l.Ec(17," view order "),l.Ub(),l.Ub(),l.Ub()}if(2&e){var n=t.$implicit;l.Eb(3),l.Gc(" ",n.restaurantName," "),l.Eb(2),l.Fc(l.lc(6,4,n.DateTime,"short")),l.Eb(6),l.Gc("Total : ",l.lc(12,7,n.Total,"ETB"),""),l.Eb(4),l.Fc(n.OrderStatus)}}function S(e,t){if(1&e&&(l.Vb(0,"ion-label",22),l.Ec(1),l.Ub()),2&e){var r=l.ic(2);l.Eb(1),l.Fc(r.messageOrder)}}function V(e,t){if(1&e&&(l.Vb(0,"ion-list"),l.Cc(1,P,18,10,"ion-row",23),l.Cc(2,S,2,1,"ion-label",16),l.Ub()),2&e){var r=l.ic();l.Eb(1),l.oc("ngForOf",r.listOfOrderCancelled),l.Eb(1),l.oc("ngIf",0==r.listOfOrderCancelled.length)}}var T,D,A,L=function(e,t){return{"location-visible":e,"location-hidden":t}},j=[{path:"",component:(T=function(){function e(t,r,n,o,a,c,s,u,d,l,f){i(this,e),this.foodService=t,this.orderService=r,this.accountService=n,this.orderDetailsService=o,this.router=a,this.sharedService=c,this.restaurantService=s,this.modalController=u,this.callNumber=d,this.loadingController=l,this.toastController=f,this.listOfOrder=[],this.listOfOrderDetails=[],this.cart=[],this.messageOrder="Preparing your order ...",this.opts={freeMode:!0,slidesPerView:4.6,slidesOffsetBefore:100,slidesOffsetAfter:100},this.activeCategory=0,this.segment="All",this.listOfOrderProcessing=[],this.listOfOrderCompeleted=[],this.listOfOrderCancelled=[],this.isLoading=!1,this.showLocationDetail=!1,this.currentPage=1,this.showScroll=!1,this.listArrayOfProduct=[],this.displayedlist=[]}return a(e,[{key:"pageScroller",value:function(){this.pageTop.scrollToTop()}},{key:"ngOnInit",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadingController.create({message:"loading ...",spinner:"bubbles",animated:!0});case 2:return this.loader=e.sent,e.next=5,this.loader.present().then();case 5:this.getOrder(),this.getRestaurant(),this.getAccount(),this.getFood(),this.getOrderDetails(),this.getProcessingOrder(),this.getCompeletedOrder(),this.getCancelledOrder();case 13:case"end":return e.stop()}},e,this)}))}},{key:"getRestaurant",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.restaurantService.getAllRestaurant().subscribe(function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loader.dismiss().then();case 2:return t.next=4,e;case 4:this.listOfRestaurant=t.sent;case 5:case"end":return t.stop()}},t,this)}))},function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loader.dismiss().then();case 2:console.log(e);case 3:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"getAccount",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.accountService.getAllAccount().subscribe(function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loader.dismiss().then();case 2:return t.next=4,e;case 4:this.listOfAccount=t.sent;case 5:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"getFood",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.foodService.getAllFood().subscribe(function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loader.dismiss().then();case 2:return t.next=4,e;case 4:this.listOfFood=t.sent;case 5:case"end":return t.stop()}},t,this)}))},function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loader.dismiss().then();case 2:console.log(e);case 3:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"getOrderDetails",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.orderDetailsService.getAllOrderDetail().subscribe(function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loader.dismiss().then();case 2:return t.next=4,e;case 4:this.listOfOrderDetails=t.sent;case 5:case"end":return t.stop()}},t,this)}))},function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loader.dismiss().then();case 2:console.log(e);case 3:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"onScroll",value:function(e){var t=e.detail.scrollTop;this.showLocationDetail=t>40,this.showScroll=t>300}},{key:"getOrder",value:function(){var e=this;this.orderService.getAllOrder().subscribe(function(t){return Object(u.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loader.dismiss().then();case 2:this.UserId=localStorage.getItem("userId"),(r=t.filter(function(e){return e.customer===n.UserId})).length>0?(this.listOfOrder=[],r.forEach(function(e){if(n.getStatusOfOrder(e),null!=n.listOfRestaurant&&null!=n.listOfAccount){var t=n.listOfRestaurant.find(function(t){return t.accountId===+e.restaurantId}),r={id:e.id,DateTime:e.dateTime,Customer:n.listOfAccount.find(function(t){return t.id===+e.customer}).fullName,Location:e.location,OrderStatus:n.orderStatuses,Total:e.total,Driver:e.driver,Vehicle:e.vehicle,orderLocation:e.orderLocation,restaurantName:t.name};n.listOfOrder.push(r),n.listOfOrder.sort(function(e,t){return new Date(t.DateTime).getTime()-new Date(e.DateTime).getTime()})}else n.refreshRestaurant()})):(this.massge=!0,this.messageOrder="Preparing your order ...");case 5:case"end":return e.stop()}},e,this)}))},function(t){return Object(u.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loader.dismiss().then();case 2:console.log(t);case 3:case"end":return e.stop()}},e,this)}))})}},{key:"getProcessingOrder",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.orderService.getAllOrder().subscribe(function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loader.dismiss().then();case 2:return this.listOfOrderProcessing=[],this.UserId=localStorage.getItem("userId"),t.next=6,e.filter(function(e){return e.orderStatuses.find(function(e){return 0==e.isChecked&&"delivered"==e.val})&&e.customer==n.UserId});case 6:(r=t.sent).length>0?r.forEach(function(e){""!==e.driver&&n.accountService.getAllAccount().subscribe(function(t){var r=t.find(function(t){return t.id==+e.customer}),i=t.find(function(t){return t.id==+e.driver});n.getStatusOfOrder(e),i?(n.driverPhone=i.phonenumber,n.driverName=i.fullName):(n.driverPhone="",n.driverName="");var o={id:e.id,DateTime:e.dateTime,Customer:r.fullName,Location:e.location,OrderStatus:n.orderStatuses,driverPhonenumber:n.driverPhone,Total:e.total,Driver:n.driverName,DriverId:e.driver,CustomerId:e.customer,Vehicle:e.vehicle,orderLocation:e.orderLocation,restaurantName:n.listOfRestaurant.find(function(t){return t.accountId===+e.restaurantId}).name};n.listOfOrderProcessing.push(o),n.listOfOrderProcessing.sort(function(e,t){return new Date(t.DateTime).getTime()-new Date(e.DateTime).getTime()})})}):(this.massge=!0,this.messageProcessingOrder="Preparing your order ...");case 8:case"end":return t.stop()}},t,this)}))},function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loader.dismiss().then();case 2:console.log(e);case 3:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"getCompeletedOrder",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.orderService.getAllOrder().subscribe(function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.listOfOrderCompeleted=[],this.UserId=localStorage.getItem("userId"),t.next=3,e.filter(function(e){return e.orderStatuses.find(function(e){return 1==e.isChecked&&"delivered"==e.val})&&e.customer==n.UserId});case 3:(r=t.sent).length>0?r.forEach(function(e){n.accountService.getAllAccount().subscribe(function(t){var r={id:e.id,DateTime:e.dateTime,Customer:t.find(function(t){return t.id==+e.customer}).fullName,Location:e.location,OrderStatus:"Completed",Total:e.total,Driver:e.driver,Vehicle:e.vehicle,orderLocation:e.orderLocation,restaurantName:n.listOfRestaurant.find(function(t){return t.accountId===+e.restaurantId}).name};n.listOfOrderCompeleted.push(r),n.listOfOrderCompeleted.sort(function(e,t){return new Date(t.DateTime).getTime()-new Date(e.DateTime).getTime()})})}):(this.massge=!0,this.messageCompleteOrder="Preparing your order ...");case 5:case"end":return t.stop()}},t,this)}))},function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loader.dismiss().then();case 2:console.log(e);case 3:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"getCancelledOrder",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.orderService.getAllOrder().subscribe(function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.listOfOrderCancelled=[],this.UserId=localStorage.getItem("userId"),t.next=3,e.filter(function(e){return"false"==e.customerStatus&&e.customer==n.UserId});case 3:(r=t.sent).length>0?r.forEach(function(e){n.accountService.getAllAccount().subscribe(function(t){var r={id:e.id,DateTime:e.dateTime,Customer:t.find(function(t){return t.id==+e.customer}).fullName,Location:e.location,OrderStatus:"Cancelled",Total:e.total,Driver:e.driver,Vehicle:e.vehicle,orderLocation:e.orderLocation,restaurantName:n.listOfRestaurant.find(function(t){return t.accountId===+e.restaurantId}).name};n.listOfOrderCancelled.push(r),n.listOfOrderCancelled.sort(function(e,t){return new Date(t.DateTime).getTime()-new Date(e.DateTime).getTime()})})}):(this.massge=!0,this.messageCancelOrder="Preparing your order ...");case 5:case"end":return t.stop()}},t,this)}))},function(e){return Object(u.a)(t,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loader.dismiss().then();case 2:console.log(e);case 3:case"end":return t.stop()}},t,this)}))});case 1:case"end":return e.stop()}},e,this)}))}},{key:"getStatusOfOrder",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(this.a=0,r=0;r<e.orderStatuses.length;r++)0==e.orderStatuses[r].isChecked?this.a=this.a+1:this.orderStatuses=e.orderStatuses[r].val;if(3==this.a)for(n=0;n<e.restaurantStatuses.length;n++)1==e.restaurantStatuses[n].isChecked&&(this.orderStatuses=e.restaurantStatuses[n].val);case 3:case"end":return t.stop()}},t,this)}))}},{key:"viewOrder",value:function(e){var t=this;this.isLoading=!1,this.countItems=0,this.cart=[],this.listOfOrderDetails.filter(function(t){return t.orderId==e}).forEach(function(e){var r={CookingTime:t.listOfFood.find(function(t){return t.id==e.foodId}).cookingTime,DeliveryTime:t.listOfFood.find(function(t){return t.id==e.foodId}).deliveryTime,Description:t.listOfFood.find(function(t){return t.id==e.foodId}).description,Name:t.listOfFood.find(function(t){return t.id==e.foodId}).name,Price:t.listOfFood.find(function(t){return t.id==e.foodId}).price,amount:e.qty,categoryId:t.listOfFood.find(function(t){return t.id==e.foodId}).categoryId,id:e.foodId,picture:t.listOfFood.find(function(t){return t.id==e.foodId}).picture,restaurantId:t.listOfFood.find(function(t){return t.id==e.foodId}).restaurantId,type:t.listOfFood.find(function(t){return t.id==e.foodId}).type,orderDetailsId:e.id,orderStatus:!0};t.cart.push(r),t.countItems=t.cart.length,console.log(t.countItems)}),this.orderService.addOrder(this.cart),this.router.navigate(["/menu/order-history"])}},{key:"location",value:function(e){this.isLoading=!1,this.sharedService.status.next("order"),this.sharedService.RestaurantLocation.next(e),this.router.navigate(["/menu/location"])}},{key:"segmentChanged",value:function(e){this.segment=e.detail.value}},{key:"allOrder",value:function(e,t){this.isLoading=!0,this.modalController.create({component:d.a,cssClass:"customerOptions",componentProps:{data:e,id:t}}).then(function(e){e.present()})}},{key:"sendMessage",value:function(e,t,r){this.sharedService.driverName.next(r),this.sharedService.deriverId.next(e),this.sharedService.customerId.next(t),this.router.navigate(["/message"])}},{key:"callToDriver",value:function(e){this.callNumber.callNumber(e,!0).then(function(e){return console.log("Launched dialer!",e)}).catch(function(e){return console.log("Error launching dialer",e)})}},{key:"refresh",value:function(){var e=this;setTimeout(function(){e.getOrder()})}},{key:"refreshRestaurant",value:function(){var e=this;setTimeout(function(){e.getRestaurant(),e.getOrder(),e.getAccount()})}},{key:"refreshProcessingTask",value:function(){var e=this;setTimeout(function(){e.getProcessingOrder()},200)}},{key:"refreshCompleteTask",value:function(){var e=this;setTimeout(function(){e.getCompeletedOrder()},200)}},{key:"refreshCancelTask",value:function(){var e=this;setTimeout(function(){e.getCancelledOrder()},200)}},{key:"doRefresh",value:function(e){var t=this;setTimeout(function(){t.getOrder(),t.getProcessingOrder(),t.getCompeletedOrder(),t.getCancelledOrder(),e.target.complete()},2e3)}},{key:"loadMoreData",value:function(e){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.toastController.create({message:"No More Datas",animated:!0,duration:2e3,buttons:[{text:"Done",role:"cancel",icon:"close"}]});case 2:r=t.sent,null==e?this.currentPage=1:(this.currentPage++,this.orderService.getAllOrder().subscribe(function(t){return Object(u.a)(n,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.listArrayOfProduct=this.listArrayOfProduct.concat(t),1==e&&e.target.complete(),n.t0=t.length<10,!n.t0){n.next=7;break}return n.next=6,r.present();case 6:e.target.disabled=!0;case 7:case"end":return n.stop()}},n,this)}))},function(e){return Object(u.a)(n,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e);case 1:case"end":return t.stop()}},t)}))}));case 4:case"end":return t.stop()}},t,this)}))}}]),e}(),T.\u0275fac=function(e){return new(e||T)(l.Qb(f.a),l.Qb(h.a),l.Qb(b.a),l.Qb(m.a),l.Qb(s.g),l.Qb(v.a),l.Qb(g.a),l.Qb(c.V),l.Qb(p.a),l.Qb(c.U),l.Qb(c.bb))},T.\u0275cmp=l.Kb({type:T,selectors:[["app-order"]],viewQuery:function(e,t){var r;1&e&&l.Ic(O,1),2&e&&l.uc(r=l.hc())&&(t.pageTop=r.first)},decls:30,vars:10,consts:[[3,"translucent"],["color","primary"],["slot","start"],["scrollEvents","true",3,"fullscreen","ionScroll"],["pageTop",""],["slot","fixed",3,"ionRefresh"],["scrollable","","value","All",2,"padding-top","70px",3,"ionChange"],["value","All"],["value","Processing"],["value","Completed"],["value","Cancelled"],[4,"ngIf"],["horizontal","end","vertical","bottom","slot","fixed",3,"ngClass"],["color","light",3,"click"],["md","chevron-up-outline","ios","chevron-up-circle-outline"],["class","ion-padding meal-row",3,"click",4,"ngFor","ngForOf"],["class","message",4,"ngIf"],[1,"ion-padding","meal-row",3,"click"],["size","8",1,"border-bottom"],["color","dark"],["size","4",1,"border-bottom"],[2,"color","#f8f9fa","background-color","#17a2b8","border-radius","5px","text-align","center"],[1,"message"],["class","ion-padding meal-row",4,"ngFor","ngForOf"],[1,"ion-padding","meal-row"],[2,"margin-top","-7px",3,"click"],["name","location-outline"],[2,"font-weight","bold"],["fill","clear",3,"click"],[2,"background-color","#2185d0","border-color","#2185d0","color","#fff","border-radius","0.28571429rem","margin",".25rem .5rem .25rem 0",3,"click"],[2,"border-radius","12px",3,"click"],["name","call"]],template:function(e,t){1&e&&(l.Vb(0,"ion-header",0),l.Vb(1,"ion-toolbar",1),l.Vb(2,"ion-buttons",2),l.Rb(3,"ion-menu-button"),l.Ub(),l.Vb(4,"ion-title"),l.Ec(5,"Recent orders"),l.Ub(),l.Ub(),l.Ub(),l.Vb(6,"ion-content",3,4),l.gc("ionScroll",function(e){return t.onScroll(e)}),l.Vb(8,"ion-refresher",5),l.gc("ionRefresh",function(e){return t.doRefresh(e)}),l.Rb(9,"ion-refresher-content"),l.Ub(),l.Vb(10,"ion-segment",6),l.gc("ionChange",function(e){return t.segmentChanged(e)}),l.Vb(11,"ion-segment-button",7),l.Vb(12,"ion-label"),l.Ec(13," All "),l.Ub(),l.Ub(),l.Vb(14,"ion-segment-button",8),l.Vb(15,"ion-label"),l.Ec(16," Processing "),l.Ub(),l.Ub(),l.Vb(17,"ion-segment-button",9),l.Vb(18,"ion-label"),l.Ec(19," Completed "),l.Ub(),l.Ub(),l.Vb(20,"ion-segment-button",10),l.Vb(21,"ion-label"),l.Ec(22," Cancelled "),l.Ub(),l.Ub(),l.Ub(),l.Cc(23,k,3,2,"ion-list",11),l.Cc(24,x,3,2,"ion-list",11),l.Cc(25,E,3,2,"ion-list",11),l.Cc(26,V,3,2,"ion-list",11),l.Vb(27,"ion-fab",12),l.Vb(28,"ion-fab-button",13),l.gc("click",function(){return t.pageScroller()}),l.Rb(29,"ion-icon",14),l.Ub(),l.Ub(),l.Ub()),2&e&&(l.oc("translucent",!0),l.Eb(6),l.oc("fullscreen",!0),l.Eb(17),l.oc("ngIf","All"===t.segment),l.Eb(1),l.oc("ngIf","Processing"===t.segment),l.Eb(1),l.oc("ngIf","Completed"===t.segment),l.Eb(1),l.oc("ngIf","Cancelled"===t.segment),l.Eb(1),l.oc("ngClass",l.sc(7,L,t.showScroll,!t.showScroll)))},directives:[c.r,c.R,c.j,c.A,c.P,c.l,c.C,c.D,c.H,c.Z,c.I,c.x,n.n,c.n,n.l,c.o,c.s,c.y,n.m,c.F,c.k,c.O,c.i],pipes:[n.f,n.d],styles:["ion-toolbar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:25px}ion-content[_ngcontent-%COMP%]{position:absolute;--background:#f8f9fa;--padding-bottom:50px}ion-content[_ngcontent-%COMP%]   .orders[_ngcontent-%COMP%]{margin-top:58px}.light-bg[_ngcontent-%COMP%]{background:#fff;z-index:10}.meal-row[_ngcontent-%COMP%]{padding-bottom:0}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-color-step-150,rgba(0,0,0,.07))}#map[_ngcontent-%COMP%]{width:60%;height:280px}.message[_ngcontent-%COMP%]{padding-top:83px;padding-left:12px;color:#337ab7;font-size:27px}ion-slides[_ngcontent-%COMP%]{padding-right:0;margin-top:34px;margin-bottom:-34px;background:#e9ecef;top:calc(env(safe-area-inset-top) - 34px)}.sticky-row[_ngcontent-%COMP%]{position:sticky;top:calc(env(safe-area-inset-top) - -55px);z-index:2;background:#e9ecef;box-shadow:0 9px 11px -15px rgba(0,0,0,.75);display:flex;flex-direction:row;align-items:flex-end}.message[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{padding-left:88px}.location-visible[_ngcontent-%COMP%]{opacity:1;transition:.5s}.location-hidden[_ngcontent-%COMP%]{opacity:0;transition:.5s}ion-segment[_ngcontent-%COMP%]{position:sticky;top:calc(env(safe-area-inset-top) - 0px);z-index:2;background:#eee;box-shadow:0 9px 11px -15px rgba(0,0,0,.75);display:flex;flex-direction:row;align-items:flex-end}"]}),T)}],F=((A=function e(){i(this,e)}).\u0275fac=function(e){return new(e||A)},A.\u0275mod=l.Ob({type:A}),A.\u0275inj=l.Nb({imports:[[s.j.forChild(j)],s.j]}),A),N=((D=function e(){i(this,e)}).\u0275fac=function(e){return new(e||D)},D.\u0275mod=l.Ob({type:D}),D.\u0275inj=l.Nb({imports:[[n.c,o.e,c.S,F]]}),D)},"8D9V":function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r("HDdC"),o=r("/GcI"),c=r("XEKg"),s=r("5Jak"),u=r("cxbk"),d=r("fXoL"),l=r("tk/3"),f=function(){var e=function(){function e(t){i(this,e),this.http=t,this.APIURL=u.a.apiURL}return a(e,[{key:"create",value:function(e){return this.http.post(this.APIURL+"/orderdetail",e)}},{key:"getAllOrderDetail",value:function(){return this.http.get(this.APIURL+"/orderdetail")}},{key:"updateOrderDetail",value:function(e){return this.http.put(this.APIURL+"/orderdetail/",e)}},{key:"removeOrderDetail",value:function(e){return this.http.delete(this.APIURL+"/orderdetail/"+e).toPromise()}},{key:"handleError",value:function(e){return n.a.throw(400===e.status?new c.a(e.json()):404===e.status?new s.a:new o.a(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.cc(l.a))},e.\u0275prov=d.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"Dkj+":function(e,t,r){"use strict";r.d(t,"a",function(){return f});var n=r("HDdC"),o=r("cxbk"),c=r("/GcI"),s=r("XEKg"),u=r("5Jak"),d=r("fXoL"),l=r("tk/3"),f=function(){var e=function(){function e(t){i(this,e),this.http=t,this.APIURL=o.a.apiURL}return a(e,[{key:"create",value:function(e){return this.http.post(this.APIURL+"/food",e)}},{key:"getAllFood",value:function(){return this.http.get(this.APIURL+"/food")}},{key:"updateFood",value:function(e){return this.http.put(this.APIURL+"/food/",e)}},{key:"removeFood",value:function(e){return this.http.delete(this.APIURL+"/food/"+e).toPromise()}},{key:"handleError",value:function(e){return n.a.throw(400===e.status?new s.a(e.json()):404===e.status?new u.a:new c.a(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(d.cc(l.a))},e.\u0275prov=d.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},VNSQ:function(r,n,o){"use strict";o.d(n,"a",function(){return h});var c=o("mrSG"),s=o("2Vo4"),u=o("cxbk"),d=o("fXoL"),l=o("tk/3"),f=o("ldse"),h=function(){var r=function(){function r(e,t){i(this,r),this.http=e,this.sharedService=t,this.APIURL=u.a.apiURL,this.cart=[],this.cartItemCount=new s.a(0),this.RestaurantId=new s.a({}),this.orderStatus=new s.a({}),this.order=[],this.orderItemCount=new s.a(0)}return a(r,[{key:"create",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.http.post(this.APIURL+"/order",e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))}},{key:"getAllOrder",value:function(){return this.http.get(this.APIURL+"/order")}},{key:"updateOrder",value:function(e){return this.http.put(this.APIURL+"/order/",e)}},{key:"removeOrder",value:function(e){return this.http.delete(this.APIURL+"/order/"+e).toPromise()}},{key:"getOrderBy",value:function(e){return this.http.get(this.APIURL+"/order"+e)}},{key:"getOrderByDriverId",value:function(e){return this.http.get(this.APIURL+"/order"+e)}},{key:"getCart",value:function(){return this.cart}},{key:"getOrders",value:function(){return this.order}},{key:"getCartItemCount",value:function(){return this.cartItemCount}},{key:"getOrderItemCount",value:function(){return this.orderItemCount}},{key:"getRestaurantId",value:function(){return this.RestaurantId}},{key:"getOrderStatus",value:function(){return this.orderStatus}},{key:"addOrder",value:function(e){var t=this;this.order=[],this.amount=0,this.order.forEach(function(e){var r=t.order.indexOf(function(t){return t.orderDetailsId===e.orderDetailsId});t.order.splice(r,1)}),this.orderItemCount.next(0),e.forEach(function(e){t.amount=t.amount+e.amount,t.order.push({CookingTime:e.CookingTime,DeliveryTime:e.DeliveryTime,Description:e.Description,Name:e.Name,Price:e.Price,amount:e.amount,categoryId:e.categoryId,id:e.Food,picture:e.picture,restaurantId:e.restaurantId,type:e.type,orderDetailsId:e.orderDetailsId})}),this.orderItemCount.next(this.orderItemCount.value+this.amount)}},{key:"addProduct",value:function(e){var r,n=!1,i=t(this.cart);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.id===e.id){o.amount+=1,n=!0;break}}}catch(a){i.e(a)}finally{i.f()}n||(e.amount=1,this.cart.push(e)),this.cartItemCount.next(this.cartItemCount.value+1)}},{key:"decreaseProduct",value:function(r){var n,i=t(this.cart.entries());try{for(i.s();!(n=i.n()).done;){var o=e(n.value,2),a=o[0],c=o[1];c.id===r.id&&(c.amount-=1,0===c.amount&&this.cart.splice(a,1))}}catch(s){i.e(s)}finally{i.f()}this.cartItemCount.next(this.cartItemCount.value-1)}},{key:"removeProduct",value:function(r){var n,i=t(this.cart.entries());try{for(i.s();!(n=i.n()).done;){var o=e(n.value,2),a=o[0],c=o[1];c.id===r.id&&(this.cartItemCount.next(this.cartItemCount.value-c.amount),this.cart.splice(a,1))}}catch(s){i.e(s)}finally{i.f()}}}]),r}();return r.\u0275fac=function(e){return new(e||r)(d.cc(l.a),d.cc(f.a))},r.\u0275prov=d.Mb({token:r,factory:r.\u0275fac,providedIn:"root"}),r}()},ldse:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r("2Vo4"),o=r("fXoL"),c=function(){var e=function(){function e(){i(this,e),this.currentAddress=new n.a({}),this.restaurant=new n.a({}),this.status=new n.a({}),this.location=new n.a({}),this.orderId=new n.a({}),this.RestaurantLocation=new n.a({}),this.resId=new n.a({}),this.listOfCatagoryFilter=new n.a({}),this.deriverId=new n.a({}),this.customerId=new n.a({}),this.driverName=new n.a({})}return a(e,[{key:"getCurrentAddress",value:function(){return this.currentAddress}},{key:"getMenuFilter",value:function(){return this.listOfCatagoryFilter}},{key:"getLocation",value:function(){return this.location}},{key:"getStatus",value:function(){return this.status}},{key:"getRestaurantLocation",value:function(){return this.RestaurantLocation}},{key:"getRestaurantId",value:function(){return this.resId}},{key:"getDriverId",value:function(){return this.deriverId}},{key:"getCustomerId",value:function(){return this.customerId}},{key:"getDriverName",value:function(){return this.driverName}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=o.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();