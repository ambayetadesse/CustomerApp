!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{"QR/W":function(e,n,r){"use strict";r.r(n),r.d(n,"DetailsPageModule",function(){return P});var o,s=r("ofXK"),a=r("3Pt+"),c=r("TEn/"),d=r("tyNb"),u=r("mrSG"),l=r("fXoL"),h=r("1Bn7"),f=r("Vefk"),b=r("Dkj+"),g=r("+cje"),p=r("neG8"),v=r("VNSQ"),m=r("ldse"),k=r("QiK6"),y=((o=function(){function e(i){t(this,e),this.domCtrl=i}return i(e,[{key:"onContentScroll",value:function(t){var e=t.detail.scrollTop;e>0?(this.moveImage=e/1.6,this.scaleImage=1):(this.scaleImage=-e/200+1,this.moveImage=e/1.6)}}]),e}()).\u0275fac=function(t){return new(t||o)(l.Qb(c.c))},o.\u0275dir=l.Lb({type:o,selectors:[["","appParallax",""]],hostBindings:function(t,e){1&t&&l.gc("ionScroll",function(t){return e.onContentScroll(t)})},inputs:{imageEl:["appParallax","imageEl"]}}),o),x=["cart"];function O(t,e){if(1&t&&(l.Vb(0,"ion-badge"),l.Ec(1),l.jc(2,"async"),l.Ub()),2&t){var i=l.ic();l.Eb(1),l.Fc(l.kc(2,1,i.cartItemCount))}}function w(t,e){if(1&t){var i=l.Wb();l.Vb(0,"ion-slide"),l.Vb(1,"ion-button",15),l.gc("click",function(){l.wc(i);var t=e.index;return l.ic().activeCategory=t})("click",function(){l.wc(i);var t=e.index,n=e.$implicit;return l.ic().selectCategory(t,n.id)}),l.Ec(2),l.Ub(),l.Ub()}if(2&t){var n=e.$implicit,r=e.index,o=l.ic();l.Eb(1),l.Ib("active-category",o.activeCategory==r),l.Eb(1),l.Gc(" ",n.categoryName," ")}}function C(t,e){if(1&t){var i=l.Wb();l.Vb(0,"ion-row",16),l.Vb(1,"ion-col",17),l.Rb(2,"div",18),l.Ub(),l.Vb(3,"ion-col",19),l.Vb(4,"ion-label"),l.Ec(5),l.Vb(6,"p"),l.Ec(7),l.Ub(),l.Ub(),l.Vb(8,"ion-text",20),l.Vb(9,"b"),l.Ec(10),l.jc(11,"currency"),l.Ub(),l.Ub(),l.Ub(),l.Vb(12,"ion-col",21),l.Vb(13,"ion-button",22),l.gc("click",function(){l.wc(i);var t=e.$implicit,n=e.index;return l.ic().addToCart(t,n)}),l.Rb(14,"ion-icon",23),l.Ub(),l.Ub(),l.Ub()}if(2&t){var n=e.$implicit,r=l.ic();l.Eb(2),l.zc("background-image","url("+n.picture+")"),l.Eb(3),l.Gc(" ",n.name," "),l.Eb(2),l.Fc(n.description),l.Eb(3),l.Fc(l.lc(11,7,n.price,"ETB")),l.Eb(3),l.oc("disabled",r.setDisabled(n)),l.Eb(1),l.oc("name",n.isSelect?"checkmark":"add")}}var F,I,R,S=[{path:"",component:(F=function(){function e(i,n,r,o,s,a,c,d,u,l,h){var f=this;t(this,e),this.foodService=i,this.Activatedroute=n,this.restaurantservice=r,this.categoryService=o,this.router=s,this.modalCtrl=a,this.orderService=c,this.sharedService=d,this.toastController=u,this.cartService=l,this.document=h,this.data=null,this.opts={freeMode:!0,slidesPerView:2.5,slidesOffsetBefore:100,slidesOffsetAfter:100},this.activeCategory=0,this.listElements=[],this.categorySlidesVisible=!1,this.listOfCategory=[],this.catagories=[],this.cart=[],this.visible=!1,this.checkIndex=[],this.isenabled=!0,this.dayFinished=[],this.count=0,this.currentDate=(new Date).toISOString(),this.restaurantservice.getAllRestaurant().subscribe(function(t){f.listOfRestaurant=t,f.name=t.find(function(t){return t.id===f.resId}).name,f.picture=t.find(function(t){return t.id===f.resId}).photo})}return i(e,[{key:"ngOnInit",value:function(){this.dayFinished.push(this.Activatedroute.snapshot.paramMap.get("id")),this.cart=this.orderService.getCart(),this.cartItemCount=this.orderService.getCartItemCount(),this.id=this.Activatedroute.snapshot.paramMap.get("id"),this.resId=this.sharedService.getRestaurantId().value,this.orderService.RestaurantId.next(this.id),console.log(this.resId);var t=Object(h.l)("ios")?44:56;this.document.documentElement.style.setProperty("--header-position","calc(env(safe-area-inset-top) + ".concat(t,"px)")),this.getRestaurant(),this.getFood(),this.getCategory()}},{key:"getFood",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.foodService.getAllFood().subscribe(function(t){return Object(u.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.getCheckDisable_selecet(t),e.next=3,t.filter(function(t){return t.restaurantId===i.resId.toString()});case 3:this.listOfFood=e.sent,this.restaurantservice.getAllRestaurant().subscribe(function(t){return Object(u.a)(i,void 0,void 0,regeneratorRuntime.mark(function e(){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.find(function(t){return t.id===i.resId&&"close"===t.status});case 2:if(e.t0=e.sent,!e.t0){e.next=5;break}this.listOfFood.forEach(function(t){for(var e=0;e<=i.listOfFood.length;e++)i.checkIndex.push({index:e,item:t.id});i.dayFinished.includes(t)?i.dayFinished.splice(i.dayFinished.indexOf(t),1):i.dayFinished.push(t)});case 5:case"end":return e.stop()}},e,this)}))});case 5:case"end":return e.stop()}},e,this)}))});case 1:case"end":return t.stop()}},t,this)}))}},{key:"getCheckDisable_selecet",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i,n,r,o=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(this.listOfFood=t,i=0;i<this.cart.length;i++)for(n=0;n<this.listOfFood.length;n++)this.cart[i].id==t[n].id?(this.listOfFood[n].isSelect=!0,this.checkIndex.push({index:n,item:this.listOfFood[n].id}),void 0!==this.checkIndex&&this.checkIndex.forEach(function(e){var i=o.listOfFood.find(function(t){return t.id===e.item});if(e.item===t.id)o.listOfFood[e.index].isSelect=!0;else if(void 0!==i){var n=o.listOfFood.findIndex(function(t){return t.id===e.item});o.listOfFood[n].isSelect=!0}})):this.listOfFood[n].isSelect=!1;if(0!==this.cart.length)for(r=0;r<this.cart.length;r++)for(i=0;i<t.length;i++)this.cart[r].id==t[i].id&&this.dayFinished.push(t[i]);case 3:case"end":return e.stop()}},e,this)}))}},{key:"getCategory",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.categoryService.getAllCategory().subscribe(function(t){e.restaurantservice.getAllRestaurant().subscribe(function(i){return Object(u.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var n,r,o,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.find(function(t){return t.id===s.resId}).categoryId;case 2:if(void 0===(n=e.sent)){e.next=11;break}r=regeneratorRuntime.mark(function e(i){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.find(function(t){return t.categoryName===n[i]});case 2:r=e.sent,s.listOfCategory.push({id:r.id,categoryName:n[i]});case 4:case"end":return e.stop()}},e)}),o=0;case 6:if(!(o<n.length)){e.next=11;break}return e.delegateYield(r(o),"t0",8);case 8:o++,e.next=6;break;case 11:case"end":return e.stop()}},e)}))})});case 1:case"end":return t.stop()}},t,this)}))}},{key:"getRestaurant",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.restaurantservice.getAllRestaurant().subscribe(function(t){return Object(u.a)(e,void 0,void 0,regeneratorRuntime.mark(function e(){var i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:this.listOfRestaurant=e.sent,this.name=t.find(function(t){return t.id===i.resId}).name,this.picture=t.find(function(t){return t.id===i.resId}).photo;case 5:case"end":return e.stop()}},e,this)}))});case 1:case"end":return t.stop()}},t,this)}))}},{key:"ngAfterViewInit",value:function(){var t=this;this.lists.changes.subscribe(function(e){t.listElements=t.lists.toArray()})}},{key:"selectCategory",value:function(t,e){var i=this;this.foodService.getAllFood().subscribe(function(t){return Object(u.a)(i,void 0,void 0,regeneratorRuntime.mark(function i(){var n=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.filter(function(t){return t.categoryId===e&&t.restaurantId===n.resId.toString()});case 2:this.listOfFood=i.sent,this.listOfFood.length>0&&this.checkIndex.forEach(function(t){if(void 0!==n.listOfFood.find(function(e){return e.id===t.item})){var e=n.listOfFood.findIndex(function(e){return e.id===t.item});n.listOfFood[e].isSelect=!0}}),this.listOfFood.forEach(function(t){void 0!==n.checkIndex.find(function(e){return e.item===t.id})&&(n.dayFinished.includes(t)?n.dayFinished.splice(n.dayFinished.indexOf(t),1):n.dayFinished.push(t))});case 5:case"end":return i.stop()}},i,this)}))})}},{key:"onScroll",value:function(t){this.categorySlidesVisible=t.detail.scrollTop>1500;for(var e=0;e<this.listElements.length;e++)if(this.isElementInViewport(this.listElements[e].nativeElement)){this.activeCategory=e,this.slides.slideTo(e);break}}},{key:"isElementInViewport",value:function(t){var e=t.getBoundingClientRect();return e.top>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)}},{key:"setDisabled",value:function(t){return this.dayFinished.includes(t)}},{key:"addToCart",value:function(t,e){0===this.cart.length?(this.getAddToCart(t,e),this.count=0):this.cart[0].restaurantId==t.restaurantId?0==e?(this.count++,this.getAddToCart(t,e)):this.resId===+t.restaurantId?this.getAddToCart(t,e):this.presentAlert("Switching Restaurant is not allowed"):this.presentAlert("Switching Restaurant is not allowed")}},{key:"getAddToCart",value:function(t,e){for(var i=this,n=0;n<this.listOfFood.length;n++)e===n?(this.listOfFood[n].isSelect=!0,this.checkIndex.push({index:n,item:t.id}),void 0!==this.checkIndex&&this.checkIndex.forEach(function(e){var n=i.listOfFood.find(function(t){return t.id===e.item});if(e.item===t.id)i.listOfFood[e.index].isSelect=!0;else if(void 0!==n){var r=i.listOfFood.findIndex(function(t){return t.id===e.item});i.listOfFood[r].isSelect=!0}})):this.listOfFood[n].isSelect=!1;this.dayFinished.includes(t)?this.dayFinished.splice(this.dayFinished.indexOf(t),1):this.dayFinished.push(t),0==this.count&&this.AddCart(),this.orderService.addProduct(t)}},{key:"presentAlert",value:function(t){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.toastController.create({color:"warning",duration:2e3,message:t});case 2:return i=e.sent,e.next=5,i.present();case 5:case"end":return e.stop()}},e,this)}))}},{key:"onClick",value:function(){this.router.navigate(["/menu/cart-modal"])}},{key:"backToHome",value:function(){this.router.navigate(["/menu/home"])}},{key:"openCart",value:function(){return Object(u.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:f.a,cssClass:"cart-modal"});case 2:t.sent.present();case 3:case"end":return t.stop()}},t,this)}))}},{key:"AddCart",value:function(){var t={userId:localStorage.getItem("userId"),restaurantId:this.resId.toString(),createdAt:this.currentDate,updatedAt:this.currentDate,content:"add order"};this.cartService.create(t).subscribe(function(t){console.log(t)})}}]),e}(),F.\u0275fac=function(t){return new(t||F)(l.Qb(b.a),l.Qb(d.a),l.Qb(g.a),l.Qb(p.a),l.Qb(d.g),l.Qb(c.V),l.Qb(v.a),l.Qb(m.a),l.Qb(c.bb),l.Qb(k.a),l.Qb(s.e))},F.\u0275cmp=l.Kb({type:F,selectors:[["app-details"]],viewQuery:function(t,e){var i;1&t&&(l.Ic(c.M,1),l.Ic(c.l,1),l.Ic(x,1,l.m),l.Ic(c.y,1,l.m)),2&t&&(l.uc(i=l.hc())&&(e.slides=i.first),l.uc(i=l.hc())&&(e.content=i.first),l.uc(i=l.hc())&&(e.fab=i.first),l.uc(i=l.hc())&&(e.lists=i))},decls:18,vars:9,consts:[["color","light"],["slot","start"],["fill","solid","shape","round","color","light",3,"click"],["slot","icon-only","name","arrow-back","color","primary"],["slot","end"],[3,"click"],[4,"ngIf"],["slot","icon-only","name","cart"],["scrollEvents","true",3,"fullscreen","appParallax","ionScroll"],[1,"header-image"],["img",""],[1,"sticky-row"],[3,"options"],[4,"ngFor","ngForOf"],["class","ion-padding meal-row",4,"ngFor","ngForOf"],["fill","clear",3,"click"],[1,"ion-padding","meal-row"],["size","4",1,"border-bottom"],[1,"meal-image"],["size","5",1,"border-bottom"],["color","dark"],["size","3",1,"border-bottom"],["fill","solid",3,"disabled","click"],[3,"name"]],template:function(t,e){if(1&t&&(l.Vb(0,"ion-header"),l.Vb(1,"ion-toolbar",0),l.Vb(2,"ion-buttons",1),l.Vb(3,"ion-button",2),l.gc("click",function(){return e.backToHome()}),l.Rb(4,"ion-icon",3),l.Ub(),l.Ub(),l.Vb(5,"ion-title"),l.Ec(6),l.Ub(),l.Vb(7,"ion-buttons",4),l.Vb(8,"ion-button",5),l.gc("click",function(){return e.onClick()}),l.Cc(9,O,3,3,"ion-badge",6),l.Rb(10,"ion-icon",7),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Vb(11,"ion-content",8),l.gc("ionScroll",function(t){return e.onScroll(t)}),l.Rb(12,"div",9,10),l.Vb(14,"ion-row",11),l.Vb(15,"ion-slides",12),l.Cc(16,w,3,3,"ion-slide",13),l.Ub(),l.Ub(),l.Cc(17,C,15,10,"ion-row",14),l.Ub()),2&t){var i=l.vc(13);l.Eb(6),l.Fc(e.name),l.Eb(3),l.oc("ngIf",e.cart.length>0),l.Eb(2),l.oc("fullscreen",!0)("appParallax",i),l.Eb(1),l.zc("background-image","url("+e.picture+")"),l.Eb(3),l.oc("options",e.opts),l.Eb(1),l.oc("ngForOf",e.listOfCategory),l.Eb(1),l.oc("ngForOf",e.listOfFood)}},directives:[c.r,c.R,c.j,c.i,c.s,c.P,s.n,c.l,y,c.F,c.M,s.m,c.h,c.L,c.k,c.x,c.O],pipes:[s.b,s.d],styles:["ion-toolbar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:25px}ion-content[_ngcontent-%COMP%]{position:absolute;--background:#f1f1f1;--padding-bottom:50px}.light-bg[_ngcontent-%COMP%]{background:#fff;z-index:10}.header-image[_ngcontent-%COMP%]{background-repeat:no-repeat;background-position:50%;background-size:cover;height:30vh;will-change:transform}ion-list-header[_ngcontent-%COMP%]{--background:#a0b67d}ion-list[_ngcontent-%COMP%]{--ion-background-color:#3d85a7}.meal-row[_ngcontent-%COMP%]{padding-bottom:0}.meal-image[_ngcontent-%COMP%]{width:100%;height:100%;background-position:50%;background-size:cover;background-repeat:no-repeat;border-radius:5px}.border-bottom[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-color-step-150,rgba(0,0,0,.07))}.slides-visible[_ngcontent-%COMP%]{opacity:1;transition:1s}.slides-hidden[_ngcontent-%COMP%]{opacity:0;transition:1s}.active-category[_ngcontent-%COMP%]{--background:var(--ion-color-primary);--color:#fff;--border-radius:10px;font-weight:600}ion-badge[_ngcontent-%COMP%]{color:#fff;position:absolute;top:-9px;right:2px;border-radius:100%}.cart-icon[_ngcontent-%COMP%]{font-size:50px}.cart-length[_ngcontent-%COMP%]{color:var(--ion-color-primary);position:absolute;top:18px;left:25px;font-weight:600;font-size:1em;min-width:25px;z-index:10}.sticky-row[_ngcontent-%COMP%]{position:sticky;top:calc(env(safe-area-inset-top) - -45px);z-index:2;background:hsla(0,0%,72.5%,.9215686274509803);box-shadow:0 9px 11px -15px rgba(0,0,0,.75);display:flex;flex-direction:row;align-items:flex-end}"]}),F)}],E=((I=function e(){t(this,e)}).\u0275fac=function(t){return new(t||I)},I.\u0275mod=l.Ob({type:I}),I.\u0275inj=l.Nb({imports:[[d.j.forChild(S)],d.j]}),I),V=r("bLo3"),P=((R=function e(){t(this,e)}).\u0275fac=function(t){return new(t||R)},R.\u0275mod=l.Ob({type:R}),R.\u0275inj=l.Nb({imports:[[s.c,a.e,c.S,V.a,E]]}),R)}}])}();